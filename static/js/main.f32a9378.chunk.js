(this["webpackJsonptest-task"]=this["webpackJsonptest-task"]||[]).push([[0],{247:function(e,t,a){},248:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(35),i=a.n(r),s=a(47),o=a(14),u=a(11),l=a(219),f=a.n(l),j=a(285),b=a(279),d=a(38),g=a(16),h=a(280),O=a(282),m=a(283),v=a(284),x=a(56),p=a(223),_=a.n(p),y=a(96),k=a.n(y),S=a(221),N=a(49),C=a(100),F="24642833-3868b73e24fdcd4f0db957430",w="favouriteImages",I=["id"],L=["id"],J=function(e,t){if(t&&e){e.id,Object(C.a)(e,I);var a,n=new Map,c=Object(N.a)(e);try{for(c.s();!(a=c.n()).done;){var r=a.value,i=r.id,s=Object(C.a)(r,L),o=n.get(i);o?o.push(s):n.set(i,[s])}}catch(O){c.e(O)}finally{c.f()}var u,l=[],f=Object(N.a)(t);try{for(f.s();!(u=f.n()).done;){var j,b=u.value,g=Object(N.a)(n.get(b.id)||[b]);try{for(g.s();!(j=g.n()).done;){var h=j.value;l.push(Object(d.a)(Object(d.a)({},b),h))}}catch(O){g.e(O)}finally{g.f()}}}catch(O){f.e(O)}finally{f.f()}return l}},B=function(){var e=Object(S.a)(k.a.mark((function e(t){var a,n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://pixabay.com/api/?key=".concat(F,"&q=").concat(t,"&image_type=photo"),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=localStorage.getItem(w);return JSON.parse(e)},M=a(2),P=function(e){var t=e.images,a=e.onFavoritesChange,n=E()||[],c=function(e){var t,c;n.filter((function(t){return t.id===e.id})).length>0?(t=n.filter((function(t){return t.id!==e.id})),a([].concat(Object(g.a)(t),[Object(d.a)(Object(d.a)({},e),{},{liked:!1})]))):(t=[].concat(Object(g.a)(n),[Object(d.a)(Object(d.a)({},e),{},{liked:!0})]),a(t)),c=t,localStorage.setItem(w,JSON.stringify(c))};return Object(M.jsx)("div",{className:"images-feed__list",children:t.map((function(e){var t=e.id,a=e.webformatURL,n=e.tags,r=e.liked;return Object(M.jsxs)(h.a,{className:"images-feed__list__item images",sx:{maxWidth:345},children:[Object(M.jsx)(O.a,{className:"images__image",component:"img",height:"194",image:a,alt:n}),Object(M.jsx)(m.a,{disableSpacing:!0,children:Object(M.jsx)(v.a,{sx:{marginLeft:"auto"},className:"images__favourite-button",onClick:function(){return c({id:t,webformatURL:a,tags:n,liked:r})},"aria-label":"add to favorites",children:Object(M.jsx)(_.a,{sx:r?{color:x.a.red.A200}:{color:x.a.grey[300]}})})})]},t)}))})},D=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),i=Object(u.a)(r,2),o=i[0],l=i[1],d=Object(n.useState)(null),g=Object(u.a)(d,2),h=g[0],O=g[1],m=E();Object(n.useEffect)((function(){if(m&&h){var e=J(m,h);O(e)}}),[a]);var v=f()("images-feed",{"images-feed--no-content":!a});return Object(M.jsxs)("div",{className:v,children:[Object(M.jsx)(j.a,{className:"images-feed__search",variant:"outlined",placeholder:"Search",value:o,onChange:function(e){l(e.target.value)},onKeyPress:function(e){return function(e){"Enter"===e.key&&(B(o).then((function(e){O(e.hits),c(!0)})).catch((function(e){return console.log(e.message)})),e.preventDefault())}(e)}}),Object(M.jsx)(b.a,{className:"images-feed__manage-favourite-button",variant:"text",children:Object(M.jsx)(s.b,{to:"/favourite",children:"Manage Favorites"})}),h&&Object(M.jsx)(P,{images:h,onFavoritesChange:function(e){var t=J(e,h);O(t)}})]})},R=function(){var e=E(),t=Object(n.useState)(e),a=Object(u.a)(t,2),c=a[0],r=a[1];return c.length?Object(M.jsx)(P,{images:c,onFavoritesChange:function(e){r(e.filter((function(e){return e.liked})))}}):Object(M.jsxs)("div",{className:"favourites-feed--no-content",children:[Object(M.jsx)("h2",{children:"No items left"}),Object(M.jsx)(b.a,{className:"images-feed__manage-favourite-button",variant:"text",children:Object(M.jsx)(s.b,{to:"/",children:"Back to Search?"})})]})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,293)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};a(247);i.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(s.a,{children:Object(M.jsxs)(o.c,{children:[Object(M.jsx)(o.a,{path:"/",element:Object(M.jsx)(D,{})}),Object(M.jsx)(o.a,{path:"favourite",element:Object(M.jsx)(R,{})})]})})}),document.getElementById("root")),T()}},[[248,1,2]]]);
//# sourceMappingURL=main.f32a9378.chunk.js.map